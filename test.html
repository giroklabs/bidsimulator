<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>긴급도 테스트</title>
</head>
<body>
    <h1>긴급도 이벤트 테스트</h1>
    
    <div>
        <label for="urgency">입찰 긴급도:</label>
        <select id="urgency" onchange="if(window.handleUrgencyChange) window.handleUrgencyChange(event)">
            <option value="보통" selected>보통 (40-50% 확률 목표, 균형적 입찰)</option>
            <option value="높음">높음 (50-60% 확률 목표, 적극적 입찰)</option>
            <option value="낮음">낮음 (30-40% 확률 목표, 보수적 입찰)</option>
        </select>
    </div>
    
    <div>
        <button onclick="checkUrgencyElement()">긴급도 요소 확인</button>
        <button onclick="forceUrgencyChange('높음')">높음 강제 변경</button>
        <button onclick="testUrgencyChange('낮음')">낮음 테스트</button>
    </div>
    
    <div id="result"></div>
    
    <!-- 필요한 스크립트들 -->
    <script src="simple-storage.js"></script>
    <script src="form-data-manager.js"></script>
    <script src="github-storage.js"></script>
    <script src="excel-data-manager.js"></script>
    <script src="storage-manager.js"></script>
    <script src="script.js?v=20250116"></script>
    
    <script>
        // 긴급도 핸들러 정의
        window.handleUrgencyChange = function(e) {
            console.log('🔥🔥🔥 긴급도 변경 이벤트 발생!');
            console.log('변경된 긴급도 값:', e.target.value);
            
            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = '<p>긴급도 변경됨: ' + e.target.value + '</p>';
        };
        
        // 긴급도 요소 상태 확인 함수
        window.checkUrgencyElement = function() {
            console.log('=== 긴급도 요소 상태 확인 ===');
            const urgencyElement = document.getElementById('urgency');
            if (urgencyElement) {
                console.log('✅ 긴급도 요소 존재');
                console.log('요소:', urgencyElement);
                console.log('현재 값:', urgencyElement.value);
                console.log('옵션 개수:', urgencyElement.options.length);
                
                const resultDiv = document.getElementById('result');
                resultDiv.innerHTML = '<p>긴급도 요소 확인됨: ' + urgencyElement.value + '</p>';
            } else {
                console.error('❌ 긴급도 요소 없음');
            }
        };
        
        // 긴급도 강제 변경 함수
        window.forceUrgencyChange = function(urgencyValue) {
            console.log('=== 긴급도 강제 변경 ===');
            const urgencyElement = document.getElementById('urgency');
            if (urgencyElement) {
                console.log('변경 전 값:', urgencyElement.value);
                urgencyElement.value = urgencyValue;
                console.log('변경 후 값:', urgencyElement.value);
                
                const resultDiv = document.getElementById('result');
                resultDiv.innerHTML = '<p>긴급도 강제 변경됨: ' + urgencyValue + '</p>';
            } else {
                console.error('긴급도 요소를 찾을 수 없음');
            }
        };
        
        // 긴급도 변경 테스트 함수
        window.testUrgencyChange = function(urgencyValue) {
            console.log('=== 긴급도 변경 테스트 시작 ===');
            console.log('테스트할 긴급도 값:', urgencyValue);
            
            const urgencyElement = document.getElementById('urgency');
            if (urgencyElement) {
                console.log('긴급도 요소 찾음:', urgencyElement);
                console.log('현재 값:', urgencyElement.value);
                
                // 긴급도 값 직접 설정
                urgencyElement.value = urgencyValue;
                console.log('값 설정 후:', urgencyElement.value);
                
                // change 이벤트 수동 발생
                const changeEvent = new Event('change', { bubbles: true });
                urgencyElement.dispatchEvent(changeEvent);
                
                console.log('긴급도 변경 테스트 완료');
                
                const resultDiv = document.getElementById('result');
                resultDiv.innerHTML = '<p>긴급도 테스트 완료: ' + urgencyValue + '</p>';
            } else {
                console.error('긴급도 요소를 찾을 수 없음');
            }
        };
        
        // 페이지 로드 완료 후 확인
        document.addEventListener('DOMContentLoaded', function() {
            console.log('테스트 페이지 로드 완료');
            console.log('긴급도 핸들러 정의됨:', typeof window.handleUrgencyChange);
            console.log('긴급도 요소 확인 함수 정의됨:', typeof window.checkUrgencyElement);
        });
    </script>
</body>
</html>



