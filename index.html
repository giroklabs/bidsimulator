<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>경매일기</title>
    <meta name="description" content="경매는 기록으로 시작해서 기록으로 끝난다">
    <meta name="keywords" content="경매, 일기, 기록, 부동산, 투자">
    <meta property="og:title" content="경매일기">
    <meta property="og:description" content="경매는 기록으로 시작해서 기록으로 끝난다">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://giroklabs.github.io/bidsimulator/">
    
    <!-- Content Security Policy for GitHub OAuth -->
    <meta http-equiv="Content-Security-Policy" content="
        default-src 'self';
        script-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net https://github.com https://github.githubassets.com;
        style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://github.githubassets.com;
        font-src 'self' https://fonts.gstatic.com;
        connect-src 'self' https://api.github.com https://github.com https://github.githubassets.com https://cdn.jsdelivr.net http://localhost:5001;
        frame-src https://github.com;
        img-src 'self' data: https://github.com https://github.githubassets.com;
    ">
    
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <div class="header-content">
                <div class="header-text">
                    <h1>📔 경매일기</h1>
                    <p>경매는 기록으로 시작해서 기록으로 끝난다</p>
                </div>
                <div class="header-controls">
                    <button id="themeToggle" class="theme-toggle" title="다크 모드 토글">
                        <span class="theme-icon">🌙</span>
                    </button>
                </div>
            </div>
        </header>

        <div class="layout">
            <!-- 사이드바 -->
            <div class="sidebar">
                <!-- 클라우드 연동 레이어 -->
                <div class="sidebar-layer cloud-layer">
                    <div class="layer-header">
                        <h4>☁️ 클라우드 연동</h4>
                    </div>
                    <div class="layer-content">
                        <div id="github-status" class="status-indicator">클라우드 미연동</div>
                        <button id="github-connect-btn" class="github-btn primary">
                            <span class="btn-icon">🔑</span>
                            GitHub 연동
                        </button>
                        <button id="github-disconnect-btn" class="github-btn danger" style="display: none;">
                            <span class="btn-icon">❌</span>
                            연결 해제
                        </button>
                        <div id="github-sync-buttons" class="sync-buttons" style="display: none;">
                            <button id="github-sync-to-btn" class="github-btn success">
                                <span class="btn-icon">⬆️</span>
                                업로드
                            </button>
                            <button id="github-sync-from-btn" class="github-btn info">
                                <span class="btn-icon">⬇️</span>
                                다운로드
                            </button>
                        </div>
                    </div>
                </div>

                <!-- 엑셀 데이터 관리 레이어 -->
                <div class="sidebar-layer excel-layer">
                    <div class="layer-header">
                        <h4>📊 데이터 관리</h4>
                    </div>
                    <div class="layer-content">
                        <div class="excel-buttons">
                            <button class="btn btn-success" id="excelExportBtn">
                                <span class="btn-icon">📊</span>
                                내보내기
                            </button>
                            <button class="btn btn-info" id="excelImportBtn">
                                <span class="btn-icon">📥</span>
                                불러오기
                            </button>
                        </div>
                    </div>
                </div>

                <!-- 매물 관리 레이어 -->
                <div class="sidebar-layer property-layer">
                    <div class="layer-header">
                        <h4>📋 매물 관리</h4>
                    </div>
                    <div class="layer-content">
                        <button class="add-property-btn" id="addPropertyBtn">+ 매물 추가</button>
                        <div class="property-list" id="propertyList">
                            <div class="no-properties">
                                <p>저장된 매물이 없습니다</p>
                                <p>+ 버튼을 클릭하여 매물을 추가하세요</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        <div class="main-content">
                <!-- 메인 컨테이너: 경매 정보 입력 + 물건조사 -->
                <div class="main-container">
            <div class="input-section">
                <h2>경매 정보 입력</h2>
                <form id="auctionForm">
                    <!-- 경매 기본 정보 입력 섹션 -->
                    <div class="form-section">
                        <h3>📋 경매 기본 정보</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="caseNumber">사건번호</label>
                                <input type="text" id="caseNumber" placeholder="예: 2024타경12345" required>
                                <small class="help-text">경매 사건번호를 입력하세요</small>
                            </div>
                            <div class="form-group">
                                <label for="propertyLocation">물건지 주소</label>
                                <input type="text" id="propertyLocation" placeholder="예: 서울시 강남구" required>
                                <small class="help-text">경매 물건의 소재지를 입력하세요</small>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="propertyType">물건 종류</label>
                                <select id="propertyType" required>
                                    <option value="">물건 종류를 선택하세요</option>
                                    <option value="아파트">아파트</option>
                                    <option value="오피스텔">오피스텔</option>
                                    <option value="빌라">빌라</option>
                                    <option value="단독주택">단독주택</option>
                                    <option value="상가">상가</option>
                                    <option value="사무실">사무실</option>
                                    <option value="토지">토지</option>
                                    <option value="기타">기타</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="court">관할 법원</label>
                                <input type="text" id="court" placeholder="예: 서울중앙지방법원" required>
                                <small class="help-text">경매를 진행하는 법원</small>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="auctionDate">경매일</label>
                                <input type="date" id="auctionDate" required>
                                <small class="help-text">경매 진행 예정일</small>
                            </div>
                            <div class="form-group">
                                <label for="auctionStatus">경매 상태</label>
                                <select id="auctionStatus" required>
                                    <option value="">경매 상태를 선택하세요</option>
                                    <option value="진행중">진행중</option>
                                    <option value="예정">예정</option>
                                    <option value="종료">종료</option>
                                    <option value="유찰">유찰</option>
                                </select>
                            </div>
                        </div>
                        
                        <!-- 지역 선택 및 매각가율 정보 -->
                        <div class="form-row">
                            <div class="form-group">
                                <label for="regionSelect">지역 선택</label>
                                <select id="regionSelect" onchange="auctionSimulator.onRegionChange()">
                                    <option value="">지역을 선택하세요</option>
                                    <option value="서울">서울특별시</option>
                                    <option value="경기">경기도</option>
                                    <option value="인천">인천광역시</option>
                                    <option value="부산">부산광역시</option>
                                    <option value="대구">대구광역시</option>
                                    <option value="광주">광주광역시</option>
                                    <option value="대전">대전광역시</option>
                                    <option value="울산">울산광역시</option>
                                    <option value="세종">세종특별자치시</option>
                                </select>
                                <small class="help-text">매각가율 정보를 위한 지역 선택</small>
                            </div>
                            <div class="form-group">
                                <label for="districtSelect">구/군 선택</label>
                                <select id="districtSelect" onchange="auctionSimulator.onDistrictChange()">
                                    <option value="">먼저 지역을 선택하세요</option>
                                </select>
                                <small class="help-text">상세 지역을 선택하세요</small>
                            </div>
                        </div>
                        
                        <!-- 매각가율 정보 표시 -->
                        <div class="sale-rate-info" id="saleRateInfo" style="display: none;">
                            <h4>📊 지역별 매각가율 정보</h4>
                            <div class="sale-rate-content">
                                <div class="sale-rate-item">
                                    <span class="sale-rate-label">매각가율</span>
                                    <span class="sale-rate-value" id="saleRateValue">-</span>
                                </div>
                                <div class="sale-rate-item">
                                    <span class="sale-rate-label">매각률</span>
                                    <span class="sale-rate-value" id="saleRatePercent">-</span>
                                </div>
                                <div class="sale-rate-item">
                                    <span class="sale-rate-label">투자 추천</span>
                                    <span class="sale-rate-value" id="investmentRecommendation">-</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 경매 가격 정보 입력 섹션 -->
                    <div class="form-section">
                        <h3>💰 경매 가격 정보</h3>
                        
                        <div class="form-group">
                            <label for="bidPrice">입찰가격 (원)</label>
                            <input type="number" id="bidPrice" placeholder="예: 200000000" required>
                            <small class="help-text">입찰하고자 하는 가격을 입력하세요</small>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="marketPrice">시세 (원)</label>
                                <input type="number" id="marketPrice" placeholder="예: 250000000" required>
                                <small class="help-text">현재 시장에서 거래되는 가격</small>
                            </div>
                            <div class="form-group">
                                <label for="appraisalPrice">감정가 (원)</label>
                                <input type="number" id="appraisalPrice" placeholder="예: 243000000" required>
                                <small class="help-text">경매원이 책정한 감정가</small>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="minimumBid">최저입찰가 (원)</label>
                                <input type="number" id="minimumBid" placeholder="예: 170100000" required>
                                <small class="help-text">경매에서 시작하는 최저 가격</small>
                            </div>
                    <div class="form-group">
                                <label for="renovationCost">리모델링 비용 (원)</label>
                                <input type="number" id="renovationCost" placeholder="예: 10000000" required>
                                <small class="help-text">필요한 리모델링 비용</small>
                            </div>
                        </div>
                    </div>

                    <!-- 경매 결과 정보 입력 섹션 -->
                    <div class="form-section">
                        <h3>🏆 경매 결과</h3>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="auctionDate">낙찰일</label>
                                <input type="date" id="auctionDate">
                                <small class="help-text">경매가 진행된 날짜</small>
                            </div>
                            <div class="form-group">
                                <label for="winningBid">낙찰가 (원)</label>
                                <input type="number" id="winningBid" placeholder="예: 220000000">
                                <small class="help-text">최종 낙찰된 가격</small>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="secondBidDifference">2순위와의 차이 (원)</label>
                                <input type="number" id="secondBidDifference" placeholder="예: 5000000">
                                <small class="help-text">1순위와 2순위 입찰가의 차액</small>
                            </div>
                            <div class="form-group">
                                <label for="marketRatio">시세대비 낙찰액비율 (%)</label>
                                <input type="number" id="marketRatio" placeholder="예: 88.0" step="0.1" min="0" max="200">
                                <small class="help-text">낙찰가 ÷ 시세 × 100</small>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="auctionResultMemo">메모</label>
                            <textarea id="auctionResultMemo" rows="3" placeholder="경매 결과에 대한 추가 메모나 특이사항을 입력하세요..."></textarea>
                            <small class="help-text">경매 과정이나 결과에 대한 기타 정보</small>
                        </div>
                    </div>

                    <!-- 입찰 전략 정보 입력 섹션 -->
                    <div class="form-section">
                        <h3>🎯 입찰 전략 정보</h3>
                        <div class="form-row">
                    <div class="form-group">
                        <label for="competitorCount">예상 경쟁자 수</label>
                        <input type="number" id="competitorCount" placeholder="예: 5" min="1" max="50" required>
                    </div>
                    <div class="form-group">
                        <label for="marketCondition">시장 상황</label>
                        <select id="marketCondition" required>
                            <option value="">시장 상황을 선택하세요</option>
                            <option value="hot">활발한 시장</option>
                            <option value="normal">보통 시장</option>
                            <option value="cold">침체된 시장</option>
                        </select>
                    </div>
                        </div>
                        <div class="form-row">
                    <div class="form-group">
                        <label for="urgency">입찰 긴급도</label>
                        <select id="urgency" required>
                            <option value="">입찰 긴급도를 선택하세요</option>
                            <option value="high">높음 (반드시 낙찰 필요)</option>
                            <option value="medium">보통</option>
                            <option value="low">낮음 (적당한 가격에만)</option>
                        </select>
                    </div>
                    <div class="form-group">
                                <label for="auctionType">경매 유형</label>
                                <select id="auctionType" required>
                                    <option value="">경매 유형을 선택하세요</option>
                                    <option value="realEstate">부동산 경매</option>
                                    <option value="vehicle">자동차 경매</option>
                                    <option value="art">예술품 경매</option>
                                    <option value="general">일반 물건 경매</option>
                                </select>
                    </div>
                    </div>
                    </div>

                    <!-- 추가 정보 입력 섹션 -->
                    <div class="form-section">
                        <h3>📊 추가 정보</h3>
                    <div class="form-group">
                        <label for="failedCount">유찰 횟수</label>
                        <select id="failedCount" required>
                            <option value="">유찰 횟수를 선택하세요</option>
                            <option value="0">1회차 (첫 경매)</option>
                            <option value="1">2회차 (1회 유찰)</option>
                            <option value="2">3회차 (2회 유찰)</option>
                            <option value="3">4회차 (3회 유찰)</option>
                            <option value="4">5회차 이상 (4회 이상 유찰)</option>
                        </select>
                        <small class="help-text">이전 경매에서 유찰된 횟수</small>
                    </div>
                    <div class="form-group">
                        <label for="targetProfitRate">목표 수익률 (%)</label>
                        <input type="number" id="targetProfitRate" placeholder="예: 15" min="0" max="100" step="0.1">
                        <small class="help-text">원하는 수익률을 입력하세요</small>
                    </div>
                    </div>

                    <button type="submit" class="simulate-btn">시뮬레이션 실행</button>
                </form>
                
                    </div>

                    <!-- 물건조사 카드 -->
                    <div class="property-inspection-card">
                        <h3>🔍 물건조사</h3>
                        <div class="inspection-sections">
                            <!-- 1. 물건조사 -->
                            <div class="inspection-section">
                                <h4>📋 물건조사</h4>
                                <div class="inspection-grid">
                                    <div class="inspection-item">
                                        <label for="preservationRegistry">보존등기</label>
                                        <textarea id="preservationRegistry" placeholder="등기부등본상에 나타난 보존등기를 기재"></textarea>
                                    </div>
                                    <div class="inspection-item">
                                        <label for="buildingAge">노후도</label>
                                        <select id="buildingAge">
                                            <option value="">선택하세요</option>
                                            <option value="상">상</option>
                                            <option value="중">중</option>
                                            <option value="하">하</option>
                                        </select>
                                    </div>
                                    <div class="inspection-item">
                                        <label for="meters">계량기</label>
                                        <textarea id="meters" placeholder="가스, 전기, 수도 계량기 사용량 기록"></textarea>
                                    </div>
                                    <div class="inspection-item">
                                        <label for="mailCheck">우편물</label>
                                        <textarea id="mailCheck" placeholder="현재 누구 앞으로 우편물이 오고 있는지 체크"></textarea>
                                    </div>
                                    <div class="inspection-item">
                                        <label for="slope">경사도</label>
                                        <select id="slope">
                                            <option value="">선택하세요</option>
                                            <option value="평지">평지</option>
                                            <option value="약간높은고지대">약간 높은 고지대</option>
                                            <option value="경사지">경사지</option>
                                        </select>
                                    </div>
                                    <div class="inspection-item">
                                        <label for="lightingDirection">채광•방향</label>
                                        <input type="text" id="lightingDirection" placeholder="채광상태 및 방향 (예: 남향, 채광양호)">
                                    </div>
                                    <div class="inspection-item">
                                        <label for="structureFloor">구조/층</label>
                                        <input type="text" id="structureFloor" placeholder="총 몇 층 중 몇 층 (예: 3/5F)">
                                    </div>
                                    <div class="inspection-item">
                                        <label for="parking">주차장</label>
                                        <textarea id="parking" placeholder="주차장 여부, 세대당 주차대수, 주변 주차시설"></textarea>
                                    </div>
                                    <div class="inspection-item">
                                        <label for="waterLeakage">방수/누수</label>
                                        <textarea id="waterLeakage" placeholder="외벽 및 옥상 균열(크랙) 여부 확인"></textarea>
                                    </div>
                                    <div class="inspection-item">
                                        <label for="unpaidUtilities">미납공과금</label>
                                        <textarea id="unpaidUtilities" placeholder="관리사무소 또는 총무 확인 후 미납 여부"></textarea>
                                    </div>
                                    <div class="inspection-item">
                                        <label for="gasType">도시가스</label>
                                        <select id="gasType">
                                            <option value="">선택하세요</option>
                                            <option value="도시가스">도시가스</option>
                                            <option value="LPG">LPG</option>
                                        </select>
                                        <input type="text" id="gasUnpaid" placeholder="미납 여부">
                                    </div>
                                    <div class="inspection-item">
                                        <label for="residentsCheck">전입세대열람</label>
                                        <textarea id="residentsCheck" placeholder="동사무소 전입세대열람 결과 (누가 사는지, 전입신고 날짜)"></textarea>
                                    </div>
                                    <div class="inspection-item">
                                        <label for="currentResidents">현 거주자</label>
                                        <select id="currentResidents">
                                            <option value="">선택하세요</option>
                                            <option value="소유자거주">소유자가 사는지</option>
                                            <option value="세입자거주">세입자가 사는지</option>
                                            <option value="공실">공실</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <!-- 2. 주변조사 -->
                            <div class="inspection-section">
                                <h4>🚌 주변조사</h4>
                                <div class="inspection-grid">
                                    <div class="inspection-item">
                                        <label for="busRoutes">버스노선</label>
                                        <textarea id="busRoutes" placeholder="버스노선 및 배차시간 확인"></textarea>
                                    </div>
                                    <div class="inspection-item">
                                        <label for="subway">지하철</label>
                                        <textarea id="subway" placeholder="가까운 역과 도보 및 버스 소요시간"></textarea>
                                    </div>
                                    <div class="inspection-item">
                                        <label for="shopping">마트/백화점</label>
                                        <textarea id="shopping" placeholder="가장 가까운 마트나 백화점, 소요시간"></textarea>
                                    </div>
                                    <div class="inspection-item">
                                        <label for="schools">초•중•고</label>
                                        <textarea id="schools" placeholder="주변 초•중•고 위치, 도보 및 버스 소요시간"></textarea>
                                    </div>
                                </div>
                            </div>

                            <!-- 3. 시세조사 -->
                            <div class="inspection-section">
                                <h4>💰 시세조사</h4>
                                <div class="inspection-grid">
                                    <div class="inspection-item">
                                        <label for="molitPrice">국토교통부</label>
                                        <input type="text" id="molitPrice" placeholder="국토교통부 실거래가 (rt.molit.go.kr)">
                                    </div>
                                    <div class="inspection-item">
                                        <label for="naverPrice">네이버</label>
                                        <input type="text" id="naverPrice" placeholder="네이버 부동산 매물 시세">
                                    </div>
                                    <div class="inspection-item">
                                        <label for="kbPrice">KB시세</label>
                                        <input type="text" id="kbPrice" placeholder="KB시세 기준">
                                    </div>
                                    <div class="inspection-item">
                                        <label for="fieldPrice">현장실사</label>
                                        <textarea id="fieldPrice" placeholder="임장 시 부동산에서 실제 매매가와 전월세가"></textarea>
                                    </div>
                                </div>
                            </div>

                            <!-- 4. 기타 특이사항 -->
                            <div class="inspection-section">
                                <h4>📝 기타 특이사항 및 의견</h4>
                                <div class="inspection-grid">
                                    <div class="inspection-item full-width">
                                        <label for="specialNotes">특이사항</label>
                                        <textarea id="specialNotes" placeholder="본인의 개인적 소견이나 호재가 있는 경우 등 종합적 의견을 기록"></textarea>
                                    </div>
                                    <div class="inspection-item">
                                        <label for="finalScore">최종점수</label>
                                        <input type="number" id="finalScore" min="0" max="100" placeholder="100점 만점 기준">
                                    </div>
                                    <div class="inspection-item">
                                        <label for="inspectionDate">임장일</label>
                                        <input type="date" id="inspectionDate">
                                    </div>
                                </div>
                            </div>
                            
                        </div>
                    </div>

                    <!-- 시뮬레이션 결과 카드 -->
                    <div class="simulation-results-section" style="display: none;">
                        <h2>시뮬레이션 결과</h2>
                        
                        <!-- 권장 입찰가격 카드 -->
                        <div class="recommended-bid-card">
                            <h3>🎯 권장 입찰가격</h3>
                            <div class="recommended-bid-content">
                                <div class="recommended-bid-main">
                                    <div class="bid-price-display">
                                        <span class="bid-amount" id="recommendedBidPrice">0원</span>
                                        <span class="bid-probability" id="recommendedBidProbability">낙찰확률: 0%</span>
                                    </div>
                                    <div class="bid-status" id="recommendedBidStatus">
                                        <span class="status-indicator optimal">최적</span>
                                        <span class="status-text">낙찰확률 50-60% 수준</span>
                                    </div>
                                </div>
                                <div class="calculation-basis">
                                    <h4>📊 계산 근거</h4>
                                    <div class="basis-items">
                                        <div class="basis-item">
                                            <span class="basis-label">시세 기준가:</span>
                                            <span class="basis-value" id="marketPriceBasis">0원</span>
                                        </div>
                                        <div class="basis-item">
                                            <span class="basis-label">매각가율:</span>
                                            <span class="basis-value" id="saleRateBasis">0%</span>
                                        </div>
                                        <div class="basis-item">
                                            <span class="basis-label">예상낙찰가:</span>
                                            <span class="basis-value" id="expectedWinningBid">0원</span>
                                        </div>
                                        <div class="basis-item">
                                            <span class="basis-label">권장입찰가:</span>
                                            <span class="basis-value" id="calculatedBidPrice">0원</span>
                                        </div>
                                    </div>
                                    <div class="calculation-formula">
                                        <small>권장입찰가 = 예상낙찰가 × 0.95 (낙찰확률 50-60% 목표)</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 입찰가격별 낙찰 확률 그래프 -->
                        <div class="chart-container">
                            <h3>입찰가격별 낙찰 확률</h3>
                            <canvas id="probabilityChart"></canvas>
                        </div>

                <div class="detailed-results" style="display: none;">
                    <h3>상세 비용 분석</h3>
                    
                    <!-- 기본 정보 -->
                    <div class="cost-section">
                        <h4>📋 기본 정보</h4>
                        <div class="analysis-grid">
                            <div class="analysis-item">
                                <span class="label">입찰가격</span>
                                <span class="value" id="bidPriceDetail">0원</span>
                            </div>
                            <div class="analysis-item">
                                <span class="label">입찰보증금</span>
                                <span class="value" id="depositAmount">0원</span>
                            </div>
                            <div class="analysis-item">
                                <span class="label">잔금</span>
                                <span class="value" id="remainingPayment">0원</span>
                            </div>
                        </div>
                    </div>

                    <!-- 세금 -->
                    <div class="cost-section">
                        <h4>💰 세금 (취득세 및 관련세)</h4>
                        <div class="analysis-grid">
                            <div class="analysis-item">
                                <span class="label">취득세</span>
                                <span class="value" id="acquisitionTax">0원</span>
                            </div>
                            <div class="analysis-item">
                                <span class="label">지방교육세</span>
                                <span class="value" id="localEducationTax">0원</span>
                            </div>
                            <div class="analysis-item">
                                <span class="label">농어촌특별세</span>
                                <span class="value" id="ruralSpecialTax">0원</span>
                            </div>
                            <div class="analysis-item total-row">
                                <span class="label"><strong>세금 합계</strong></span>
                                <span class="value" id="totalTaxes"><strong>0원</strong></span>
                            </div>
                        </div>
                    </div>

                    <!-- 등기비용 -->
                    <div class="cost-section">
                        <h4>📄 등기 관련 비용</h4>
                        <div class="analysis-grid">
                            <div class="analysis-item">
                                <span class="label">소유권이전등기</span>
                                <span class="value" id="ownershipTransferTax">0원</span>
                            </div>
                            <div class="analysis-item">
                                <span class="label">근저당권설정등기</span>
                                <span class="value" id="mortgageTax">0원</span>
                            </div>
                            <div class="analysis-item">
                                <span class="label">지방교육세 (등기분)</span>
                                <span class="value" id="registrationEducationTax">0원</span>
                            </div>
                            <div class="analysis-item">
                                <span class="label">국민주택채권</span>
                                <span class="value" id="housingBond">0원</span>
                            </div>
                            <div class="analysis-item">
                                <span class="label">인지세</span>
                                <span class="value" id="stampTax">0원</span>
                            </div>
                            <div class="analysis-item total-row">
                                <span class="label"><strong>등기비용 합계</strong></span>
                                <span class="value" id="totalRegistrationFees"><strong>0원</strong></span>
                            </div>
                        </div>
                    </div>

                    <!-- 전문가 수수료 -->
                    <div class="cost-section">
                        <h4>⚖️ 전문가 수수료</h4>
                        <div class="analysis-grid">
                            <div class="analysis-item">
                                <span class="label">법무사 수수료</span>
                                <span class="value" id="legalFee">0원</span>
                            </div>
                            <div class="analysis-item total-row">
                                <span class="label"><strong>전문가 수수료 합계</strong></span>
                                <span class="value" id="totalProfessionalFees"><strong>0원</strong></span>
                            </div>
                        </div>
                    </div>


                    <!-- 기타 비용 -->
                    <div class="cost-section">
                        <h4>🔧 기타 발생 가능 비용</h4>
                        <div class="analysis-grid">
                            <div class="analysis-item">
                                <span class="label">명도비</span>
                                <span class="value" id="evictionCost">0원</span>
                            </div>
                            <div class="analysis-item">
                                <span class="label">미납 공과금</span>
                                <span class="value" id="unpaidUtilities">0원</span>
                            </div>
                            <div class="analysis-item">
                                <span class="label">리모델링 비용</span>
                                <span class="value" id="renovationCostDisplay">0원</span>
                            </div>
                            <div class="analysis-item total-row">
                                <span class="label"><strong>기타 비용 합계</strong></span>
                                <span class="value" id="totalOtherCosts"><strong>0원</strong></span>
                            </div>
                        </div>
                    </div>

                    <!-- 총계 -->
                    <div class="cost-section total-section">
                        <h4>💯 총 비용 요약</h4>
                        <div class="analysis-grid">
                            <div class="analysis-item">
                                <span class="label">입찰가격</span>
                                <span class="value" id="totalBidPrice">0원</span>
                            </div>
                            <div class="analysis-item">
                                <span class="label">부대비용 합계</span>
                                <span class="value" id="totalAdditionalCosts">0원</span>
                            </div>
                            <div class="analysis-item grand-total">
                                <span class="label"><strong>총 투자 비용</strong></span>
                                <span class="value" id="totalInvestmentDetail"><strong>0원</strong></span>
                            </div>
                            <div class="analysis-item">
                                <span class="label">부대비용 비율</span>
                                <span class="value" id="costPercentage">0%</span>
                            </div>
                        </div>
                    </div>
                </div>

                        <div class="cost-analysis" style="display: none;">
                            <h3>비용 분석</h3>
                            <div class="analysis-grid">
                                <div class="analysis-item">
                                    <span class="label">입찰가격</span>
                                    <span class="value" id="bidPriceDisplay">0원</span>
                                </div>
                                <div class="analysis-item">
                                    <span class="label">수수료</span>
                                    <span class="value" id="commission">0원</span>
                        </div>
                        <div class="analysis-item">
                            <span class="label">세금</span>
                            <span class="value" id="tax">0원</span>
                        </div>
                        <div class="analysis-item">
                            <span class="label">리모델링 비용</span>
                            <span class="value" id="renovationCostDisplay">0원</span>
                        </div>
                        <div class="analysis-item">
                            <span class="label">총 투자 비용</span>
                            <span class="value" id="totalInvestment">0원</span>
                        </div>
                    </div>
                </div>

                <div class="price-analysis" style="display: none;">
                    <h3>가격 분석</h3>
                    <div class="analysis-grid">
                        <div class="analysis-item">
                            <span class="label">감정가 대비 입찰가</span>
                            <span class="value" id="appraisalRatio">0%</span>
                        </div>
                        <div class="analysis-item">
                            <span class="label">시세 대비 입찰가</span>
                            <span class="value" id="marketRatio">0%</span>
                        </div>
                        <div class="analysis-item">
                            <span class="label">최저입찰가 대비</span>
                            <span class="value" id="minimumRatio">0%</span>
                        </div>
                        <div class="analysis-item">
                            <span class="label">시세 대비 예상 수익</span>
                            <span class="value" id="marketProfit">0원</span>
                        </div>
                    </div>
                </div>


                <div class="strategy-section" style="display: none;">
                    <h3>입찰 전략</h3>
                    <div id="strategyAdvice" class="strategy-advice"></div>
                </div>
                        
                    </div>
                </div>

            <div id="initialMessage" class="initial-message">
                <p>👈 왼쪽에서 경매 정보를 입력하고 "시뮬레이션 실행" 버튼을 클릭하세요</p>
            </div>
        </div>
        </div>
    </div>

    <!-- 매물 추가/편집 모달 -->
    <div class="modal" id="propertyModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">매물 추가</h3>
                <span class="close" id="closeModal">&times;</span>
            </div>
            <div class="modal-body">
                <form id="propertyForm">
                    <div class="form-group">
                        <label for="caseNumber">사건번호</label>
                        <input type="text" id="caseNumber" placeholder="예: 2024타경12345">
                        <button type="button" id="fetchAuctionData" class="fetch-btn">데이터 가져오기</button>
                    </div>
                    <div class="form-group">
                        <label for="propertyName">매물명</label>
                        <input type="text" id="propertyName" placeholder="예: 강남구 아파트">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="cancelBtn">취소</button>
                <button type="button" class="btn btn-primary" id="savePropertyBtn">저장</button>
            </div>
        </div>
    </div>

    <!-- 엑셀 가져오기 모달 -->
    <div class="modal" id="excelImportModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>📥 엑셀 데이터 가져오기</h3>
                <span class="close" id="closeImportModal">&times;</span>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="excelFileInput">CSV 파일 선택</label>
                    <input type="file" id="excelFileInput" accept=".csv,.xls,.xlsx" />
                    <small class="form-text">
                        지원 형식: CSV, Excel (.xls, .xlsx)<br>
                        <strong>주의:</strong> 기존 데이터는 덮어쓰여집니다.
                    </small>
                </div>
                <div class="import-instructions">
                    <h4>📋 데이터 형식 안내</h4>
                    <p>CSV 파일은 다음 형식을 따라야 합니다:</p>
                    <ul>
                        <li>첫 번째 행: 헤더 (사건번호, 매물명, 매물유형, 위치, 지역, 구/군, 메모, 생성일시, 수정일시)</li>
                        <li>데이터 행: 각 매물의 정보</li>
                        <li>필수 필드: 사건번호 또는 매물명 중 하나</li>
                    </ul>
                    <p><strong>예시:</strong></p>
                    <pre>사건번호,매물명,매물유형,위치,지역,구/군,메모,생성일시,수정일시
2024타경12345,강남구 아파트,아파트,서울시 강남구,서울,강남구,매각예정,2024-01-15T10:00:00Z,2024-01-15T10:00:00Z</pre>
                </div>
            </div>
        </div>
    </div>

    <script src="simple-storage.js"></script>
    <script src="form-data-manager.js"></script>
    <script src="github-storage.js"></script>
    <script src="excel-data-manager.js"></script>
    <!-- 카카오 관련 스크립트 (숨김 처리) -->
    <!-- <script src="kakao-login.js"></script> -->
    <!-- <script src="kakao-drive-storage.js"></script> -->
    <script src="storage-manager.js"></script>
    <script src="script.js"></script>
    
    <!-- Mac 스타일 다크 모드 토글 기능 -->
    <script>
        // 다크 모드 토글 기능
        const themeToggle = document.getElementById('themeToggle');
        const themeIcon = themeToggle.querySelector('.theme-icon');
        
        // 로컬 스토리지에서 테마 설정 불러오기
        const savedTheme = localStorage.getItem('theme') || 'light';
        document.documentElement.setAttribute('data-theme', savedTheme);
        updateThemeIcon(savedTheme);
        
        // 테마 토글 이벤트 리스너
        themeToggle.addEventListener('click', () => {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            
            document.documentElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            updateThemeIcon(newTheme);
        });
        
        // 테마 아이콘 업데이트
        function updateThemeIcon(theme) {
            themeIcon.textContent = theme === 'dark' ? '☀️' : '🌙';
        }
        
        // 시스템 다크 모드 감지
        const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');
        mediaQuery.addListener((e) => {
            if (!localStorage.getItem('theme')) {
                document.documentElement.setAttribute('data-theme', e.matches ? 'dark' : 'light');
                updateThemeIcon(e.matches ? 'dark' : 'light');
            }
        });
    </script>
</body>
</html>
